webpackJsonp([0],{"0jH9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("ssT3");var s={name:"Register",data:function(){return{captcha_key:"",imgdata:"",phoneNumber:"",captcha_code:"",dataKey:"",userName:"",userPassword:"",result:{},errorTxt:"",axios_request:!0,StepTwo:!1,StepThree:!1,msg:"",msgType:"",msgShow:!1,access_token:""}},methods:{getCaptcha:function(){var t=this;this.axios.post("http://larabbsmc.beesoft.ink/api/captchas",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},phone:this.phoneNumber}).then(function(e){t.imgdata=e.data.captcha_image_content,t.captcha_key=e.data.captcha_key,console.log(t.captcha_key),t.imgdata&&t.captcha_key&&(t.axios_request=!1,t.StepTwo=!0)}).catch(function(t){return alert("该手机已注册！"),!1})},stepTwoGet:function(){var t=this;console.log(this.captcha_code),console.log(this.captcha_key),this.axios.post("http://larabbsmc.beesoft.ink/api/verificationCodes",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},captcha_code:this.captcha_code,captcha_key:this.captcha_key}).then(function(e){t.dataKey=e.data.key,console.log(e),console.log(t.dataKey),t.StepTwo=!1,t.StepThree=!0}).catch(function(t){alert("验证码填写错误！请点击图片更换验证码！")})},stepThreeGet:function(){var t=this;this.axios.post("http://larabbsmc.beesoft.ink/api/users",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},verification_key:this.dataKey,verification_code:"123456",name:this.userName,password:this.userPassword}).then(function(e){t.StepThree=!1,e?(t.access_token=e.data.meta.access_token,t.localstorein()):t.fail=!0}).catch(function(t){console.log(t)})},localstorein:function(){var t={name:this.phoneNumber,access_token:this.access_token};this.$store.state.user;this.login(t)},login:function(t){this.$store.dispatch("login",t),this.showMsg("注册成功","success")},showMsg:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.msg=t,this.msgType=a,this.msgShow=!1,this.$nextTick(function(){e.msgShow=!0})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-md-offset-4 floating-box"},[a("Message",{attrs:{show:t.msgShow,type:t.msgType,msg:t.msg},on:{"update:show":function(e){t.msgShow=e}}}),t._v(" "),a("div",{staticClass:"panel panel-default"},[t._m(0),t._v(" "),a("div",{staticClass:"panel-body"},[t.axios_request?a("div",{staticClass:"FirstStep"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("手机号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNumber,expression:"phoneNumber"},{name:"validator",rawName:"v-validator.required",value:{regex:/^1[3|4|5|8][0-9]\d{4,8}$/,error:"请填入正确的号码"},expression:"{ regex: /^1[3|4|5|8][0-9]\\d{4,8}$/, error: '请填入正确的号码'  }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{id:"tell",type:"text",placeholder:"请填写手机号"},domProps:{value:t.phoneNumber},on:{input:function(e){e.target.composing||(t.phoneNumber=e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn btn-lg btn-success btn-block",attrs:{type:"submit"},on:{click:t.getCaptcha}},[t._v("\n\t\t\t\t\t    \t获取图片验证码\n\t\t\t\t\t  ")])]):t._e(),t._v(" "),t.StepTwo?a("div",{staticClass:"SecondStep"},[a("div",{staticClass:"thumbnail"},[a("div",{staticClass:"captcha"},[a("img",{attrs:{src:t.imgdata,id:"captcha_img"},on:{click:t.getCaptcha}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("填写验证码")]),t._v(" "),a("input",{directives:[{name:"validator",rawName:"v-validator:input.required",value:{regex:/^[A-Za-z0-9]+$/,error:"验证码格式不正确"},expression:"{ regex: /^[A-Za-z0-9]+$/, error: '验证码格式不正确' }",arg:"input",modifiers:{required:!0}},{name:"model",rawName:"v-model",value:t.captcha_code,expression:"captcha_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写确认密码"},domProps:{value:t.captcha_code},on:{input:function(e){e.target.composing||(t.captcha_code=e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn btn-lg btn-success btn-block",attrs:{type:"submit"},on:{click:t.stepTwoGet}},[t._v("\n\t\t\t\t\t    \t获取图片验证码\n\t\t\t\t\t  ")])]):t._e(),t._v(" "),t.StepThree?a("div",{staticClass:"ThirdStep"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("用户名")]),t._v(" "),a("input",{directives:[{name:"validator",rawName:"v-validator:input.required",value:{regex:/^[a-zA-Z]+\w*\s?\w*$/,error:"用户名要求以字母开头的单词字符"},expression:"{ regex: /^[a-zA-Z]+\\w*\\s?\\w*$/, error: '用户名要求以字母开头的单词字符' }",arg:"input",modifiers:{required:!0}},{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写用户名"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("密码")]),t._v(" "),a("input",{directives:[{name:"validator",rawName:"v-validator.required",value:{regex:/^\w{6,16}$/,error:"密码要求 6 ~ 16 个单词字符"},expression:"{ regex: /^\\w{6,16}$/, error: '密码要求 6 ~ 16 个单词字符' }",modifiers:{required:!0}},{name:"model",rawName:"v-model",value:t.userPassword,expression:"userPassword"}],staticClass:"form-control",attrs:{id:"password",type:"password",placeholder:"请填写密码"},domProps:{value:t.userPassword},on:{input:function(e){e.target.composing||(t.userPassword=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("确认密码")]),t._v(" "),a("input",{directives:[{name:"validator",rawName:"v-validator.required",value:{target:"#password"},expression:"{ target: '#password' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"password",placeholder:"请填写确认密码"}})]),t._v(" "),a("button",{staticClass:"btn btn-lg btn-success btn-block",attrs:{type:"submit"},on:{click:t.stepThreeGet}},[a("i",{staticClass:"fa fa-btn fa-sign-in"}),t._v(" 注册\n\t\t\t\t\t  ")])]):t._e()])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("请注册")])])}]};var r=a("VU/8")(s,o,!1,function(t){a("mG0m")},"data-v-9cc6efa6",null);e.default=r.exports},mG0m:function(t,e){}});
//# sourceMappingURL=0.4f50ce788e2291a20973.js.map